<p>I had setup a raspberry pi cluster, and suddenly the master became
non-operational. The cluster was able to see itself, but if I login to master
node, I noticed it was not able communicate externally.</p>
<p>The DNS Resolution for any site from master was failing.</p>
<p>Then I figured that Ubuntu had made some changes to resolve.conf protocol</p>
<p>Ubuntu requested users not to edit /etc/resolv.conf, and it's content on my
cluster was not something that I wanted.</p>
<p>I had setup pihole, and my devices had started to see the internet through
this. I noticed that Ubuntu since 18.04 had not set my router as the first
nameserver and thus after pi-hole experiment, my master node lost its
resolution capability</p>
<p>Fixing the Ubuntu DNS resolution was easy. I followed <a class="reference external" href="https://datawookie.netlify.com/blog/2018/10/dns-on-ubuntu-18.04/">this post from datawookie</a></p>
<ol class="arabic simple">
<li><p>resolvconf package was already installed.</p></li>
<li><p>Edit /etc/resolvconf/resolv.conf.d/head</p></li>
</ol>
<pre class="literal-block">nameserver &lt;pi-hole-server&gt;
nameserver 8.8.4.4
nameserver 8.8.8.8</pre>
<ol class="arabic simple" start="3">
<li><p>Restart the resolvconf server</p></li>
</ol>
<pre class="literal-block">sudo service resolvconf restart</pre>
